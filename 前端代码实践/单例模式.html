<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>单例模式</title>
</head>
<body>
    <button id="loginBtn">登录</button>
    
    <script>
        /*
        单例模式：只有一个实例，并且可以全局访问
        主要解决：一个全局使用的类，频繁的创建和销毁
        何时使用：需要控制实例的数量，节省系统化资源时
        如何实现：判断系统是否已经有这个单例，有则返回无则创建
        使用场景：1、全局缓存 2、弹窗
        */
        // js单例模式，实现登录
        var createLogin=function(){
            var div=document.createElement("div");
            
            div.innerHTML='<input type="text" value="请输入用户名">';
            div.style.display='none';
            document.body.appendChild(div);
            return div;
        }
        
        var getSingle=function(fn){
            var result;
            // 返回的是一个函数
            return function(){
                // 单例模式：实例不为空则直接返回，否则先创建再返回该实例
                return result||(result=fn.apply(this,arguments));
            }
        }
        // 返回的函数被保存在create
        var create=getSingle(createLogin)
        document.getElementById("loginBtn").onclick=function(){
            var login=create();
            login.style.display='block';
        }

    </script>
</body>

</html>